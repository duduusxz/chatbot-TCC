<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Young+Serif&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&family=Young+Serif&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="Images/Captura_de_tela_2025-03-14_174727-removebg-preview.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='PaginaChatbot/PaginaChatbot.css') }}">     
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/logo.png') }}" type="image/x-icon">
    <script src="Chatbot.js"></script>
    <title>Chat Fala.i</title>
</head>
<body>
    <nav>
        <div class="nav-left">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo do Chatbot" id="logo" class="logo" width="60px">
        </div>
        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
        <ul class="nav-menu" id="nav-menu">
            <li><a href="../PaginaInicial/TelaInicial.html">Serviços</a></li>
            <li><a href="PaginaCadastro.html">Quem somos</a></li>
            <li><a href="PaginaInicial.html">Tutorial</a></li>
            <li><a href="PaginaInicial.html">Contato</a></li>
        </ul>
        <div class="nav-right">
            <!-- Botão de Toggle do Modo Escuro -->
            <button id="toggle-dark-mode" class="toggle-mode" title="Alternar modo escuro">
                <i class="fas fa-moon" id="theme-icon"></i>
            </button>
            <!-- Botão Minha Conta -->
            <form action="/minha_conta">
                <button class="account-btn" type="submit">
                    <i class="fas fa-user"></i>
                    <span>Minha conta</span>
                </button>
            </form>
        </div>
    </nav>
    
    <div class="tudo">
        <div class="menu-container">
            <div class="icon-menu">
                <button class="bars" onclick="abrirmenu()"><i class="fas fa-bars"></i></button>
                <button class="add">&plus;</button>
            </div>
            <div class="menu" id="menu"></div>
        </div>
        
        <div class="container">
            <div class="main-container">
                {% if resposta %}
                <div class="resposta-animada">
                    <strong>Fala.i:</strong>
                    <p>{{ resposta }}</p>
                </div>
                {% endif %}
            </div>
            
            <!-- Chat input centralizado abaixo do main-container -->
            <div class="chat">
                <form action="/resposta" method="post" id="form">
                    <textarea class="pergunta" name="pergunta" id="pergunta" placeholder="Fala aí!"></textarea>
                    <button type="Submit" class="enviar"><i class="bi bi-arrow-up-circle-fill"></i></button>
                </form>
            </div>
        </div>
    </div>
    
    <div vw class="enabled">
        <div vw-access-button class="active"></div>
        <div vw-plugin-wrapper>
            <div class="vw-plugin-top-wrapper"></div>
        </div>
    </div>
    
    <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
    <script>
        new window.VLibras.Widget('https://vlibras.gov.br/app');
    </script>
    
    <script>
        function abrirmenu() {
            const menu = document.getElementById("menu");
            menu.classList.toggle("ativo");
        }

        const menuContainer = document.querySelector(".menu-container");
        const menu = document.getElementById("menu");
        const addButton = document.querySelector(".add");

        menuContainer.addEventListener("mouseenter", () => {
            menu.classList.add("ativo");
        });

        menuContainer.addEventListener("mouseleave", () => {
            menu.classList.remove("ativo");
        });

        addButton.addEventListener("mouseenter", () => {
            menu.classList.add("ativo");
        });

        addButton.addEventListener("mouseleave", () => {
            menu.classList.remove("ativo");
        });

        const textarea = document.getElementById('pergunta');
        const form = document.getElementById('form');

        textarea.addEventListener('keydown', function (event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault(); // evita quebra de linha
                form.requestSubmit();   // envia o formulário
            }
        });

        // Toggle dark mode
        const toggleButton = document.getElementById('toggle-dark-mode');
        const themeIcon = document.getElementById('theme-icon');

        toggleButton.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        });

        function toggleMobileMenu() {
            const navMenu = document.getElementById('nav-menu');
            navMenu.classList.toggle('mobile-active');
        }
    </script>
</body>
</html>